# ğŸ§­ ä½¿ç”¨æŒ‡å¼• \{#usage-guide}

`@shined/react-use` æ—¨åœ¨**å¼•å¯¼ä¸€ç§é‡å¡‘ React å¼€å‘çš„æ–°ç¼–ç¨‹èŒƒå¼**ã€‚å®ƒé€šè¿‡æä¾›ä¼—å¤šé«˜è´¨é‡ã€è¯­æ„åŒ–çš„ Hooks æ¥å¸®åŠ©å¼€å‘è€…æé«˜å¼€å‘æ•ˆç‡ã€å…»æˆæ›´å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œå‡å°‘å¯¹ `useEffect` å’Œ `useState` ç­‰çš„ç›´æ¥ä¾èµ–ï¼ŒåŒæ—¶æœŸæœ›å¼€å‘è€…èƒ½å¤Ÿé€æ¸é€‚åº”ã€Œ**Hooks ä¼˜å…ˆ**ã€çš„ React å¼€å‘ï¼ˆç¼–ç¨‹ï¼‰èŒƒå¼ã€‚

ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§åœºæ™¯çš„ä½¿ç”¨æŒ‡å¼•ï¼Œä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ä½¿ç”¨ `@shined/react-use`ã€‚

:::tip æç¤º
ä»¥ä¸‹ä»…åŒ…å«éƒ¨åˆ†å¸¸è§åœºæ™¯çš„ä½¿ç”¨æŒ‡å¼•ï¼Œéƒ¨åˆ†å»ºè®®å¸¦æœ‰ä¸ªäººåå¥½ï¼Œå…·ä½“ä½¿ç”¨è¯·æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ã€‚
:::

## æ›¿æ¢ useState \{#replace-use-state}

`useState` æ˜¯ React ä¸­ç”¨æ¥ç®¡ç†ç»„ä»¶çŠ¶æ€çš„ Hookï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ª React å¼€å‘è€…éƒ½ä¼šç”¨åˆ°ã€‚

ä½†æ˜¯ä½ç‰ˆæœ¬ React ä¸­çš„ `useState` å¯èƒ½å¯¼è‡´éé¢„æœŸçš„è¡Œä¸ºã€‚æ¯”å¦‚åœ¨ React &lt;= 17 æ—¶ï¼Œå½“ç»„ä»¶å¸è½½åï¼Œè°ƒç”¨ `setState` ä¼š**æŠ›å‡ºä»¤äººå›°æƒ‘çš„è­¦å‘Š**ï¼ˆå‚è€ƒ [å®‰å…¨çŠ¶æ€](/docs/optmization/safe-state)ï¼‰ã€‚æ­¤å¤–ï¼ŒReact å†…éƒ¨ä½¿ç”¨æµ…æ¯”è¾ƒæ¥åˆ¤æ–­çŠ¶æ€æ˜¯å¦æ”¹å˜ï¼Œè¿™å¯èƒ½ä¼š**å¯¼è‡´ç»„ä»¶è¿›è¡Œä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œä»è€Œå½±å“æ€§èƒ½**ã€‚

### useSafeState \{#use-safe-state}

`useSafeState` è¢«è®¾è®¡ä¸º `useState` çš„ç›´æ¥æ›¿ä»£æ–¹æ¡ˆï¼Œç”¨äºè§„é¿ä½ç‰ˆæœ¬ React ä¸‹çš„è­¦å‘Šé—®é¢˜ï¼Œå¹¶éµå¾ªå®˜æ–¹åšæ³•åœ¨é«˜ç‰ˆæœ¬ React ä¸‹ä¸ `useState` è¡Œä¸ºä¿æŒä¸€è‡´ã€‚

åŒæ—¶å®ƒè¿˜å…·å¤‡å¯é€‰çš„æ€§èƒ½ä¼˜åŒ–ç‰¹æ€§ï¼ˆ`deep` é€‰é¡¹ï¼Œæ·±åº¦æ¯”è¾ƒçŠ¶æ€ï¼Œç¡®è®¤å˜æ›´å†æ›´æ–°ï¼Œé»˜è®¤ `false`ï¼‰ã€‚

æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ [å®‰å…¨çŠ¶æ€](/docs/optimization/safe-state) å’Œ [useSafeState](/reference/use-safe-state)ã€‚

```tsx
const [name, setName] = useState('react')

// æ›¿æ¢ä¸º
const [name, setName] = useSafeState('react')
```

```tsx
const [state, setState] = useState({ count: 0 })
setState({ count: 0 }) // è§¦å‘é‡æ–°æ¸²æŸ“
setState({ count: 0 }) // è§¦å‘é‡æ–°æ¸²æŸ“
setState({ count: 0 }) // è§¦å‘é‡æ–°æ¸²æŸ“

// æ›¿æ¢ä¸º
const [state, setState] = useSafeState({ count: 0 }, { deep: true })
setState({ count: 0 }) // ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“
setState({ count: 0 }) // ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“
setState({ count: 0 }) // ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“

// deep ä¸ºå¯é€‰é¡¹ï¼Œå½“çŠ¶æ€ç®€å•ã€å¯æ§ï¼Œä¸”çŠ¶æ€å€¼çš„åœ°å€é¢‘ç¹å˜åŠ¨ï¼Œä½†å®é™…å€¼æœªæ”¹å˜æ—¶ï¼Œå°†æ˜¾è‘—é™ä½æ¸²æŸ“æ¬¡æ•°
```

### useBoolean \{#use-boolean}

`useBoolean` ç”¨äºç®¡ç†å¸ƒå°”å€¼çŠ¶æ€ï¼Œæä¾›äº†ä¸€ç³»åˆ—è¯­æ„åŒ–çš„æ“ä½œå‡½æ•°ï¼Œä¾‹å¦‚ `toggle`ã€`setTrue`ã€`setFalse` ç­‰ï¼Œåº•å±‚ä½¿ç”¨ `useSafeState` ä»¥ç¡®ä¿çŠ¶æ€å®‰å…¨ã€‚

è¯¦æƒ…å‚è€ƒ [useBoolean](/reference/use-boolean)ã€‚

```tsx
const [bool, actions] = useBoolean(false)

actions.toggle() // true
actions.setTrue() // true
actions.setFalse() // false
```

### useCounter \{#use-counter}

`useCounter` ç”¨äºç®¡ç† number ç±»å‹çŠ¶æ€ï¼Œæä¾›äº†ä¸€ç³»åˆ—è¯­æ„åŒ–çš„æ“ä½œå‡½æ•°ï¼Œä¾‹å¦‚ `inc`ã€`dec`ã€`set` ç­‰ï¼Œåº•å±‚ä½¿ç”¨ `useSafeState` ä»¥ç¡®ä¿çŠ¶æ€å®‰å…¨ã€‚

è¯¦æƒ…å‚è€ƒ [useCounter](/reference/use-counter)ã€‚

```tsx
const [count, actions] = useCounter(0)

actions.inc() // 1
actions.inc(10) // 11
actions.dec() // 10
actions.set(20) // 20
```

## å‡å°‘ useEffect \{#reduce-use-effect}

`useEffect` æ˜¯ React ä¸­æœ€åŸºç¡€ã€æœ€å¸¸ç”¨çš„ Hook ä¹‹ä¸€ï¼Œä½†ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¹¶ä¸æ¨èç›´æ¥ä½¿ç”¨ã€‚å› ä¸ºå®ƒçš„ä½¿ç”¨æ–¹å¼ç›¸å¯¹è¾ƒä¸ºåŸå§‹ï¼Œä¸”å®¹æ˜“å‡ºç°**å‰¯ä½œç”¨éš¾ä»¥æ§åˆ¶ï¼Œæˆ–å‰¯ä½œç”¨ä¸é¢„æœŸä¸ç¬¦**ç­‰é—®é¢˜ã€‚

`@shined/react-use` æä¾›äº†ä¸€ç³»åˆ—é«˜è´¨é‡ã€è¯­æ„åŒ–çš„ Hooks æ¥ç­‰ä»·æ›¿æ¢éƒ¨åˆ† `useEffect` è°ƒç”¨åœºæ™¯ã€‚

### useMount \{#use-mount}

æˆ‘ä»¬å¯èƒ½ä¼šè¿™æ ·ä½¿ç”¨ `useEffect`ï¼ŒåŠŸèƒ½ä¸Šç­‰åŒäºç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡ `doSomething()`ã€‚

```tsx
// ä¸æ¨è
useEffect(() => {
  doSomething()
}, [])
```

æˆ–è€…ï¼Œå½“æˆ‘ä»¬éœ€è¦åœ¨æŒ‚è½½æ—¶æ‰§è¡Œä¸€äº›å¼‚æ­¥æ“ä½œä¸”éœ€è¦æ‹¿åˆ°ç»“æ—¶æœï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåŒ…ä¸€å±‚ async å‡½æ•°æ¥æ‰§è¡Œå¼‚æ­¥æ“ä½œã€‚

```tsx
// ä¸æ¨è
useEffect(() => {
  async function asyncWrapper() {
    const result = await doSomethingAsync()
    const.log(result)
  }

  asyncWrapper()
}, [])
```

ä»¥ä¸Šä»£ç åœ¨é€»è¾‘ä¸Šå®Œå…¨æ²¡é—®é¢˜ï¼Œä½†æ˜¯å­˜åœ¨**ä»£ç å¯è¯»æ€§å·®ã€ç¼ºä¹è¯­æ„åŒ–ã€åæœŸéš¾ä»¥ç»´æŠ¤ã€å¯èƒ½æ„å¤–è¿”å›æ¸…ç†å‡½æ•°**ç­‰è¯¸å¤šé—®é¢˜å’Œéšæ‚£ï¼ŒåŒæ—¶å¯¹å¼‚æ­¥å‡½æ•°æ”¯æŒä¸å¤Ÿå‹å¥½ã€‚æ¨èæ›¿æ¢ä¸ºæ›´åŠ è¯­ä¹‰åŒ–çš„ `useMount`ï¼Œæ”¯æŒå¼‚æ­¥å‡½æ•°ã€‚

è¯¦æƒ…å‚è€ƒ [useMount](/reference/use-mount)ã€‚

```tsx
// æ¨è
useMount(doSomething)

// æ¨è
useMount(async () => {
  const result = await doSomethingAsync()
  const.log(result)
})
```

### useUnmount \{#use-unmount}

`useUnmount` ç”¨äºåœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œä¸€äº›æ“ä½œï¼Œä¾‹å¦‚æ¸…ç†å‰¯ä½œç”¨ï¼ŒåŸºæœ¬ä¸ `useMount` ç±»ä¼¼ï¼Œä½†æ‰§è¡Œæ—¶æœºä¸åŒã€‚

è¯¦æƒ…å‚è€ƒ [useUnmount](/reference/use-unmount)ã€‚

```tsx
// ä¸æ¨è
useEffect(() => {
  return () => {
    doSomething()
  }
}, [])

// æ¨è
useUnmount(doSomething)
```

### useUpdateEffect \{#use-update-effect}

`useUpdateEffect` ç”¨äºåœ¨ç»„ä»¶æ›´æ–°æ—¶æ‰§è¡Œä¸€äº›æ“ä½œï¼Œä¾‹å¦‚ç›‘å¬æŸäº›çŠ¶æ€çš„å˜åŒ–å¹¶æ‰§è¡Œæ“ä½œï¼Œä½†æ˜¯**å¿½ç•¥é¦–æ¬¡æ¸²æŸ“**ï¼Œé€‚ç”¨äºä¸éœ€è¦ç«‹å³æ‰§è¡Œå‰¯ä½œç”¨çš„åœºæ™¯ã€‚

è¯¦æƒ…å‚è€ƒ [useUpdateEffect](/reference/use-update-effect)ã€‚

```tsx
// ä¸æ¨è
const isMount = useRef(false)

useEffect(() => {
  if (isMount.current) {
    doSomething()
  } else {
    isMount.current = true
  }
}, [state])
```

```tsx
// æ¨è
useUpdateEffect(() => {
  doSomething()
}, [state])
```

### useEffectOnce \{#use-effect-once}

`useEffectOnce` ç”¨äºåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡æ“ä½œï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ä¹Ÿæ‰§è¡Œä¸€æ¬¡æ“ä½œï¼Œé€‚ç”¨äºåªéœ€è¦æ‰§è¡Œä¸€æ¬¡å‰¯ä½œç”¨çš„åœºæ™¯ï¼Œæœ¬è´¨ä¸Š `useEffectOnce` æ˜¯ `useMount` å’Œ `useUnmount` çš„ç»„åˆã€‚

è¯¦æƒ…å‚è€ƒ [useEffectOnce](/reference/use-effect-once)ã€‚

```tsx
// ä¸æ¨è
useEffect(() => {
  doSomething()
  return () => clearSomething()
}, [])
```

```tsx
// æ¨è
useEffectOnce(() => {
  doSomething()
  return () => clearSomething()
})
```

### useAsyncEffect \{#use-async-effect}

`useAsyncEffect` ç”¨äºåœ¨çŠ¶æ€å˜æ›´æ—¶æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œé€‚ç”¨äºéœ€è¦ç›‘å¬çŠ¶æ€å˜åŒ–å¹¶æ‰§è¡Œå¼‚æ­¥æ“ä½œçš„åœºæ™¯ã€‚

è¯¦æƒ…å‚è€ƒ [useAsyncEffect](/reference/use-async-effect)ã€‚

```tsx
// ä¸æ¨è
useEffect(() => {
  async function asyncWrapper() {
    const result = await doSomethingAsync()
    // å½“å‰ Effect æ‰§è¡Œç»“æŸåï¼Œå¯èƒ½ä»ç„¶æ‰§è¡Œåç»­é€»è¾‘ï¼Œå­˜åœ¨å†…å­˜æ³„æ¼ç­‰å®‰å…¨é£é™©
    doSomethingAfter(result)
  }

  asyncWrapper()
}, [state])
```

```tsx
// æ¨è
useAsyncEffect(async (isCancelled) => {
  const result = await doSomethingAsync()
  
  if(isCancelled()) {
    // å¦‚æœå½“å‰ Effect æ‰§è¡Œç»“æŸï¼Œä¸ä¼šæ‰§è¡Œåç»­é€»è¾‘
    clearSomething()
    return
  }

  doSomethingAfter(result)
}, [state])
```

## å¸¸è§åœºæ™¯ \{#common-scenarios}

### é˜²æŠ–å’ŒèŠ‚æµ \{#debounce-and-throttle}

æ¨èä½¿ç”¨ `useDebouncedFn` å’Œ `useThrottledFn` ä¸¤ä¸ª Hook æ¥å¤„ç†å¸¸è§çš„é˜²æŠ–å’ŒèŠ‚æµåŠŸèƒ½ï¼Œå½“ç„¶ä¹Ÿæœ‰ [useDebouncedEffect](/reference/use-debounced-effect) å’Œ [useDebouncedEffect](/reference/use-debounced-effect) ä¸¤ä¸ª Hookï¼Œç”¨äºå¤„ç†é˜²æŠ–å’ŒèŠ‚æµçš„å‰¯ä½œç”¨ï¼Œä½†ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ›´æ¨èå‰è€…ã€‚

è¯¦æƒ…å‚è€ƒ [useDebouncedFn](/reference/use-debounced-fn) å’Œ [useThrottledFn](/reference/use-throttled-fn)ã€‚

```tsx
const handleSubmit = (value) => console.log(value)
const debouncedHandleSubmit = useDebouncedFn(handleSubmit, 500)

const handleScroll = (event) => console.log('scroll')
const throttledHandleScroll = useThrottledFn(handleScroll, 500)
```

### å¤„ç†äº‹ä»¶ \{#handle-events}

`useEventListener` ç”¨äºåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨ç§»é™¤äº‹ä»¶ç›‘å¬å™¨ï¼Œé€‚ç”¨äºéœ€è¦æ·»åŠ äº‹ä»¶ç›‘å¬å™¨çš„åœºæ™¯ã€‚ä»»ä½•å®ç°äº† `EventTarget` æ¥å£çš„å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼Œä¾‹å¦‚ `window`ã€`document`ã€`ref.current` ç­‰ã€‚

```tsx
// ç¬¦åˆä»¥ä¸‹æ¥å£çš„å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼ŒSSR ä¸‹æ”¯æŒ `() => window` çš„å†™æ³•
export interface InferEventTarget<Events> {
  addEventListener: (event: Events, fn?: any, options?: any) => any
  removeEventListener: (event: Events, fn?: any, options?: any) => any
}
```

è¯¦æƒ…å‚è€ƒ [useEventListener](/reference/use-event-listener)ã€‚

```tsx
// ä¸æ¨è
useEffect(() => {
  const handler = () =>  doSomething()
  window.addEventListener('resize', handler, { passive: true })
  return () => {
    window.removeEventListener('resize', handler)
  }
}, [])
```


```tsx
// æ¨èï¼Œä¸” SSR å‹å¥½
useEventListener('resize', doSomething, { passive: true })
// useEventListener(() => window, 'resize', doSomething, { passive: true })
```

### å¤åˆ¶åˆ°å‰ªè´´æ¿ \{#copy-to-clipboard}

`useClipboard` ç”¨äºå¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿ï¼Œé€‚ç”¨äºéœ€è¦å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿çš„åœºæ™¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨ Clipboard APIï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒï¼Œåˆ™è‡ªåŠ¨ä¼˜é›…é™çº§åˆ° `document.execCommand('copy')`ã€‚

è¯¦æƒ…å‚è€ƒ [useClipboard](/reference/use-clipboard)ã€‚

```tsx
// ä¸æ¨è
const copyToClipboard = () => {
  const input = document.createElement('input')
  document.body.appendChild(input)
  input.value = 'Hello, React'
  input.select()
  document.execCommand('copy')
  document.body.removeChild(input)
}

// ä¸æ¨èï¼Œå¼•å…¥äº†é¢å¤–ä¾èµ–ï¼Œä½¿ç”¨ä½“éªŒå‰²è£‚
import copy from 'copy-to-clipboard'
import CopyToClipboard from 'react-copy-to-clipboard'
```

```tsx
// æ¨è
const clipboard = useClipboard()

clipboard.copy('Hello, React')
```

### æ—¶é—´æ ¼å¼åŒ– \{#date-format}

`useDateFormat` ç”¨äºæ ¼å¼åŒ–æ—¶é—´ï¼Œ**è½»é‡ã€çµæ´»ã€ä½¿ç”¨ä½“éªŒç»Ÿä¸€**ï¼Œé€‚ç”¨äºéœ€è¦æ ¼å¼åŒ–æ—¶é—´çš„åœºæ™¯ï¼Œæ”¯æŒè‡ªå®šä¹‰æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚

è¯¦æƒ…å‚è€ƒ [useDateFormat](/reference/use-date-format)ã€‚

```tsx
// ä¸æ¨èï¼Œå¼•å…¥äº†é¢å¤–ä¾èµ–ï¼Œä½¿ç”¨ä½“éªŒå‰²è£‚
import dayjs from 'dayjs' // ä½¿ç”¨çº¦å®šå¼æ ¼å¼åŒ– tokens
dayjs('2024/09/01').format('YYYY-MM-DD HH:mm:ss') 

// ä¸æ¨èï¼Œå¼•å…¥äº†é¢å¤–ä¾èµ–ï¼Œä½¿ç”¨ä½“éªŒå‰²è£‚
import moment from 'moment' // ä½¿ç”¨çº¦å®šå¼æ ¼å¼åŒ– tokens
moment('2024/09/01').format('YYYY-MM-DD HH:mm:ss')

// ä¸æ¨èï¼Œå¼•å…¥äº†é¢å¤–ä¾èµ–ï¼Œä½¿ç”¨ä½“éªŒå‰²è£‚
import dateFns from 'date-fns' // date-fns v2 å¼€å§‹ä½¿ç”¨ unicode æ ‡å‡†çš„æ ¼å¼åŒ– tokens
dateFns.format(new Date(), 'yyyy-MM-dd HH:mm:ss')
```

```tsx
// æ¨è
// é»˜è®¤ä½¿ç”¨çº¦å®šå¼çš„æ ¼å¼åŒ– tokens
const time = useDateFormat('2024/09/01', 'YYYY-MM-DD HH:mm:ss')
const time = useDateFormat(1724315857591, 'YYYY-MM-DD HH:mm:ss')
// åŒæ—¶æ”¯æŒ Unicode æ ‡å‡†çš„æ ¼å¼åŒ– tokens
const time = useDateFormat(new Date(), 'yyyy-MM-dd HH:mm:ss', { unicodeSymbols: true })
```

### å®šæ—¶å™¨ \{#timer}

æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸ä½¿ç”¨ `setTimeout` å’Œ `setInterval` æ¥å¤„ç†å®šæ—¶ä»»åŠ¡ï¼Œç›´æ¥**ä½¿ç”¨ç›¸å¯¹ç¹ç**ï¼Œä¸”è¦æ±‚å¼€å‘è€…**æ‰‹åŠ¨æ¸…ç†å®šæ—¶å™¨**ï¼Œå®¹æ˜“å‡ºç°**å¿˜è®°æ¸…ç†ã€æ¸…ç†ä¸åŠæ—¶**ç­‰é—®é¢˜ã€‚

```tsx
// ä¸æ¨è
useEffect(() => {
  const timer = setTimeout(() => {
    doSomething()
  }, 1000)

  return () => clearTimeout(timer)
}, [])
```

`@shined/react-use` æä¾›äº† `useTimeoutFn` å’Œ `useIntervalFn` ä¸¤ä¸ª Hook æ¥å¤„ç†å®šæ—¶ä»»åŠ¡ï¼Œè‡ªåŠ¨æ¸…ç†å®šæ—¶å™¨ï¼Œé¿å…å‡ºç°**å¿˜è®°æ¸…ç†ã€æ¸…ç†ä¸åŠæ—¶**ç­‰é—®é¢˜ã€‚

è¯¦æƒ…å‚è€ƒ [useTimeoutFn](/reference/use-timeout-fn) å’Œ [useIntervalFn](/reference/use-interval-fn)ã€‚

```tsx
// æ¨è
useTimeoutFn(doSomething, 1000, { immediate: true })
useIntervalFn(doSomething, 1000, { immediate: true })
```

## æµè§ˆå™¨ API \{#browser-api}

æˆ‘ä»¬ç»å¸¸éœ€è¦è°ƒç”¨æµè§ˆå™¨ API æ¥å®ç°ä¸€äº›åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä½†è¿œä¸é™äºï¼š

- ä½¿ç”¨ [Fullscreen API](https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API) è¿›è¡Œå…¨å±æ“ä½œ
- ä½¿ç”¨ [ResizeObserver API](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver) ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–
- ä½¿ç”¨ [Network Information API](https://developer.mozilla.org/en-US/docs/Web/API/Network_Information_API) è·å–ç½‘ç»œçŠ¶æ€
- ä½¿ç”¨ [EyeDropper API](https://developer.mozilla.org/en-US/docs/Web/API/EyeDropper_API) è·å–å±å¹•é¢œè‰²
- ä½¿ç”¨ [Geolocation API](https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API) è·å–ç”¨æˆ·åœ°ç†ä½ç½®
- ä½¿ç”¨ [Battery Status API](https://developer.mozilla.org/en-US/docs/Web/API/Battery_Status_API) è·å–è®¾å¤‡ç”µé‡

ç›´æ¥æ“ä½œ API å¯èƒ½ä¼š**è®©ä»£ç å˜å¾—å¤æ‚ã€éš¾ä»¥ç»´æŠ¤**ï¼Œç”±äº API çš„å…¼å®¹æ€§é—®é¢˜ï¼Œå¼€å‘è€…åœ¨å¤„ç†è¿™äº›é—®é¢˜æ—¶ä¸ä»…**å¢åŠ äº†è¯†åˆ«å…¼å®¹æƒ…å†µçš„å¿ƒæ™ºè´Ÿæ‹…**ï¼Œè¿˜å¯èƒ½éœ€è¦åœ¨è¯†åˆ«åï¼Œ**å¢åŠ ä»£ç å¤æ‚åº¦ä»¥å®ç°å…¼å®¹**ï¼ˆå¦‚ä½¿ç”¨å†å²é—ç•™çš„ API å®ç°å°½å¯èƒ½å…¼å®¹ï¼‰ã€‚æ­¤å¤–ï¼Œè¿˜éœ€æ³¨æ„è®¸å¤šç»†èŠ‚ä»¥é€‚åº” React ç»„ä»¶åŒ–å¼€å‘ã€‚

> ä¾‹å¦‚ï¼Œ[Fullscreen API](https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API)åœ¨ä¸åŒæµè§ˆå™¨åŠå…¶ç‰ˆæœ¬ä¸­çš„å®ç°æœ‰æ‰€ä¸åŒï¼Œ[Battery Status API](https://developer.mozilla.org/en-US/docs/Web/API/Battery_Status_API)åªåœ¨éƒ¨åˆ†æµè§ˆå™¨ä¸­å¾—åˆ°æ”¯æŒï¼Œè€Œ[EyeDropper API](https://developer.mozilla.org/en-US/docs/Web/API/EyeDropper_API)ç›®å‰ä»…åœ¨æœ€æ–°çš„Chromeå’ŒEdgeæµè§ˆå™¨ä¸­å¯ç”¨ã€‚

å¹¸è¿çš„æ˜¯ï¼Œ`@shined/react-use` å·²ç»å°è£…äº†è®¸å¤šå¸¸ç”¨çš„æµè§ˆå™¨ API ä»¥æä¾›æ›´å¥½çš„ä½¿ç”¨ä½“éªŒï¼ŒåŒæ—¶è®¸å¤šæµè§ˆå™¨ API ç›¸å…³çš„ Hooks å†…éƒ¨ä½¿ç”¨äº† [useSupported](/reference/use-supported) ç»Ÿä¸€è¿”å›äº† API çš„æ”¯æŒæƒ…å†µï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´åŠ æ–¹ä¾¿åœ°ä½¿ç”¨æµè§ˆå™¨ APIã€‚

æƒ³äº†è§£æ›´å¤šå¯ç”¨çš„æµè§ˆå™¨ API Hooksï¼Œè¯·è®¿é—® [Hooks åˆ—è¡¨é¡µ](/reference) çš„ Browser åˆ†ç±»ã€‚

## SSR ç›¸å…³

`@shined/react-use` æ—¨åœ¨æä¾›æ›´å¥½çš„æœåŠ¡ç«¯æ¸²æŸ“æ”¯æŒï¼Œæ‰€æœ‰ Hooks éƒ½å…¼å®¹æœåŠ¡ç«¯æ¸²æŸ“ï¼Œä¸”ä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨ã€‚

### useIsomorphicLayoutEffect \{#use-isomorphic-layout-effect}

`useIsomorphicLayoutEffect` ç”¨äºåœ¨æœåŠ¡ç«¯æ¸²æŸ“æ—¶ä½¿ç”¨ `useLayoutEffect`ï¼Œåœ¨å®¢æˆ·ç«¯æ¸²æŸ“æ—¶ä½¿ç”¨ `useEffect`ï¼Œé€‚ç”¨äºéœ€è¦åœ¨æœåŠ¡ç«¯æ¸²æŸ“æ—¶æ‰§è¡ŒåŒæ­¥å‰¯ä½œç”¨çš„åœºæ™¯ã€‚

è¯¦æƒ…å‚è€ƒ [useIsomorphicLayoutEffect](/reference/use-isomorphic-layout-effect)ã€‚

```tsx
// ä¸æ¨èï¼ŒSSR æ—¶ä¼šæŠ›å‡ºè­¦å‘Š
useLayoutEffect(() => {
  doSomething()
}, [state])
```

```tsx
// æ¨èï¼Œåœ¨è¿è¡Œæ—¶è‡ªåŠ¨å†³å®šä½¿ç”¨ `useLayoutEffect` æˆ– `useEffect`
useIsomorphicLayoutEffect(() => {
  doSomething()
}, [state])
```

## useCallback ä¸ useMemo \{#use-callback-and-use-memo}

`useCallback` å’Œ `useMemo` æ˜¯ React ä¸­ç”¨äºæ€§èƒ½ä¼˜åŒ–çš„ Hookï¼Œå¸¸ç”¨æ¥ç¼“å­˜å‡½æ•°å’Œå€¼ï¼Œé¿å…ä¸å¿…è¦çš„é‡å¤è®¡ç®—ã€‚

ä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é™¤äº†æ€§èƒ½ä¼˜åŒ–å¤–ï¼Œå¯èƒ½è¿˜éœ€è¦ç¡®ä¿å¼•ç”¨ç¨³å®šæ€§ï¼Œä»¥é¿å…ä¸å¿…è¦çš„å‰¯ä½œç”¨ç­‰é—®é¢˜ã€‚è€Œæ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œ`useCallback` å’Œ `useMemo` ä»…ä¾›ç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œå¹¶ä¸ä¿è¯å¼•ç”¨ç¨³å®šï¼Œå› æ­¤åœ¨æŸäº›åœºæ™¯ä¸‹å¯èƒ½ä¼šå¯¼è‡´ä¸ç¨³å®šçš„è¡Œä¸ºã€‚

å¦‚æœä½ éœ€è¦ä¼˜åŒ–æ€§èƒ½çš„åŒæ—¶è¿˜æƒ³ç¡®ä¿å‡½æ•°ã€ç»“æœçš„ç¨³å®šï¼Œé‚£ä¹ˆä½ å¯ä»¥å°è¯• `useStableFn` ä¸ `useCreation`ã€‚

### useStableFn \{#use-stable-fn}

`useStableFn` ç”¨äºç¡®ä¿å‡½æ•°å¼•ç”¨ç¨³å®šï¼Œé€‚ç”¨äºéœ€è¦ç¡®ä¿å‡½æ•°å¼•ç”¨ç¨³å®šçš„åœºæ™¯ï¼Œä¾‹å¦‚ä¼ é€’ç»™å­ç»„ä»¶çš„å›è°ƒå‡½æ•°ã€‚

è¯¦æƒ…å‚è€ƒ [useStableFn](/reference/use-stable-fn)ã€‚

```tsx
// ä¸æ¨è
const handleClick = () => {
  console.log('click')
}

return <HeavyComponent onClick={handleClick} />
```

```tsx
// æ¨è
const handleClick = useStableFn(() => {
  console.log('click')
})

return <HeavyComponent onClick={handleClick} />
```

### useCreation \{#use-creation}

`useCreation` ç”¨äºåˆå§‹åŒ–æ“ä½œï¼Œé€‚ç”¨äºéœ€è¦ç¡®ä¿åˆå§‹åŒ–æ“ä½œåªæ‰§è¡Œä¸€æ¬¡çš„åœºæ™¯ï¼Œä¾‹å¦‚åˆå§‹åŒ–å¤æ‚å¯¹è±¡ã€è€—æ—¶æ“ä½œç­‰ï¼Œ`useCreation` é™¤äº†æ€§èƒ½ä¼˜åŒ–å¤–ï¼Œè¿˜èƒ½ç¡®ä¿ç»“æœåœ¨ä¸åŒæ¸²æŸ“å‘¨æœŸé—´ä¿æŒå¼•ç”¨ç¨³å®šã€‚

è¯¦æƒ…å‚è€ƒ [useCreation](/reference/use-creation)ã€‚

```tsx
// ä¸æ¨è
const heavyResult = useMemo(() => doHeavyWorkToInit(), [])
const dynamicResult = useMemo(() => doHeavyWorkToCreate(), [dependency])
```

```tsx
// æ¨è
const heavyResult = useCreation(() => doHeavyWorkToInit())
const dynamicResult = useCreation(() => doHeavyWorkToCreate(), [dependency])
```

## è¿›é˜¶æŒ‡å¼• \{#advanced-guide}

å¦‚æœä½ éœ€è¦å°è£…è‡ªå®šä¹‰ Hookï¼Œæˆ–è€…éœ€è¦æ›´å¤šé«˜çº§åŠŸèƒ½ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹è¿›é˜¶æŒ‡å¼•ã€‚

### useStabelFn \{#use-stable-fn}

`useStableFn` ç”¨äºç¡®ä¿å‡½æ•°å¼•ç”¨ç¨³å®šï¼Œé€‚ç”¨äºéœ€è¦ç¡®ä¿å‡½æ•°å¼•ç”¨ç¨³å®šçš„åœºæ™¯ï¼Œä¾‹å¦‚ä¼ é€’ç»™å­ç»„ä»¶çš„å›è°ƒå‡½æ•°ï¼Œé€šå¸¸ Hooks æš´éœ²çš„å‡½æ•°æœ€å¥½ä½¿ç”¨ `useStableFn` åŒ…è£¹ã€‚

è¯¦æƒ…å‚è€ƒ [useStableFn](/reference/use-stable-fn)ã€‚

```tsx
const fn = useStableFn(() => {
  console.log('click')
})
```

### useLatest \{#use-latest}

`useLatest` ç”¨äºè·å–æœ€æ–°çš„å€¼ï¼Œé€‚ç”¨äºéœ€è¦è·å–æœ€æ–°å€¼çš„åœºæ™¯ï¼Œä¾‹å¦‚åœ¨å¼‚æ­¥æ“ä½œä¸­è·å–æœ€æ–°çš„çŠ¶æ€ï¼Œé€šå¸¸æ­é… `useStableFn` ä½¿ç”¨ï¼Œä»¥å®ç°ç¼“å­˜ç¨³å®šçš„å›è°ƒå‡½æ•°åŒæ—¶è·å–æœ€æ–°çŠ¶æ€ã€‚

è¯¦æƒ…å‚è€ƒ [useLatest](/reference/use-latest)ã€‚

```tsx
const latest = useLatest(value)
```

### useTargetElement \{#use-target-element}

`useTargetElement` ç”¨äºè·å–ç›®æ ‡å…ƒç´ ï¼Œé€‚ç”¨äºéœ€è¦è·å–ç›®æ ‡å…ƒç´ çš„åœºæ™¯ï¼Œä¾‹å¦‚åœ¨è‡ªå®šä¹‰ Hook ä¸­è·å–ç›®æ ‡å…ƒç´ ï¼Œç¡®ä¿ä½¿ç”¨ä½“éªŒçš„ä¸€è‡´æ€§ã€‚

è¯¦æƒ…å‚è€ƒ [useTargetElement](/reference/use-target-element) å’Œ [ElementTarget](/docs/features/element-target)ã€‚

```tsx
const ref = useRef<HTMLDivElement>(null) // <div ref={ref} />
const targetRef = useTargetElement(ref)

const targetRef = useTargetElement('#my-div')
const targetRef = useTargetElement('#my-div .container')

const targetRef = useTargetElement(() => window)
const targetRef = useTargetElement(() => document.getElementById('my-div'))

// ä¸æ¨èï¼Œä¼šå¼•èµ· SSR é—®é¢˜
const targetRef = useTargetElement(window)
// ä¸æ¨èï¼Œä¼šå¼•èµ· SSR é—®é¢˜
const targetRef = useTargetElement(document.getElementById('my-div'))
```

### useCreation \{#use-creation}

`useCreation` ç”¨äºåˆå§‹åŒ–æ“ä½œï¼Œé€‚ç”¨äºéœ€è¦ç¡®ä¿åˆå§‹åŒ–æ“ä½œåªæ‰§è¡Œä¸€æ¬¡çš„åœºæ™¯ï¼Œä¾‹å¦‚åˆå§‹åŒ–å¤æ‚å¯¹è±¡ã€è€—æ—¶æ“ä½œç­‰ï¼Œ`useCreation` é™¤äº†æ€§èƒ½ä¼˜åŒ–å¤–ï¼Œè¿˜èƒ½ç¡®ä¿ç»“æœåœ¨ä¸åŒæ¸²æŸ“å‘¨æœŸé—´ä¿æŒå¼•ç”¨ç¨³å®šã€‚

è¯¦æƒ…å‚è€ƒ [useCreation](/reference/use-creation)ã€‚

```tsx
const initResult = useCreation(() => doHeavyWorkToInit())
```

### useSupported \{#use-supported}

`useSupported` ç”¨äºè·å–æµè§ˆå™¨ API çš„æ”¯æŒæƒ…å†µï¼Œé€‚ç”¨äºéœ€è¦åˆ¤æ–­æµè§ˆå™¨ API æ”¯æŒæƒ…å†µçš„åœºæ™¯ã€‚

è¯¦æƒ…å‚è€ƒ [useSupported](/reference/use-supported)ã€‚

```tsx
const supported = useSupported('BatteryStatus')
```

### usePausable \{#use-pausable}

`usePausable` ç”¨äºåˆ›å»ºä¸€ä¸ª [Pausable](/docs/features/pausable) å®ä¾‹ï¼Œä»¥èµ‹äºˆ Hooks å¯æš‚åœçš„èƒ½åŠ›ï¼Œé€‚ç”¨äºéœ€è¦æš‚åœå’Œæ¢å¤çš„åœºæ™¯ã€‚

è¯¦æƒ…å‚è€ƒ [usePausable](/reference/use-pausable)ã€‚

```tsx
const pausable = usePausable(false, pauseCallback, resumeCallback)
```

### useGetterRef \{#use-getter-ref}

`useGetterRef` æš´éœ²äº†ä¸€ä¸ªå‡½æ•°ä»¥è·å– `ref.current` çš„æœ€æ–°å€¼ï¼Œé€‚ç”¨äºéœ€è¦å­˜å‚¨çŠ¶æ€ä½†ä¸æƒ³è§¦å‘é‡æ–°æ¸²æŸ“ï¼ŒåŒæ—¶éœ€è¦è·å–æœ€æ–°å€¼çš„åœºæ™¯ã€‚

è¯¦æƒ…å‚è€ƒ [useGetterRef](/reference/use-getter-ref)ã€‚

```tsx
const [isActive, isActiveRef] = useGetterRef(false)
```
