---
category: State
---

# useRafState

import { HooksType } from '@/components'

<HooksType {...frontmatter} />

A React Hook that uses [requestAnimationFrame](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame) to update the state in the next frame for better performance. This Hook works similarly to [React.useState](https://react.dev/reference/react/useState), except for the timing of updates.

## Scenarios \{#scenes}

- **Animation Scenario Optimization**: Used to improve performance in animations or frame rendering, updating the state only in the next frame
- **High-frequency Event Handling**: For example, reducing the state update frequency during scrolling or dragging to prevent performance degradation
- ...

## Demo \{#demo}

import { App } from './demo'

<App />

## Usage \{#usage}

```tsx
// Use in scenarios where performance optimization is needed
const [state, setState] = useRafState({ isScrolling: false })

// You can use the `deep` option inherited from `useSafeState` to further reduce rendering and thus optimize performance
const [{ x, y }, setPosition] = useRafState({ x: 0, y: 0 }, { deep: true })
```

## Source \{#source}

import { Source } from '@/components'

<Source />

## API \{#api}

```tsx
const [state, setState] = useRafState(initialState, options)
```

### Initial State \{#initial-state}

Same as [React.useState](https://react.dev/reference/react/useState).

### Options \{#options}

For more details, refer to [useSafeState#options](/reference/use-safe-state/#options).

### Returns \{#returns}

Same as [React.useState](https://react.dev/reference/react/useState).
