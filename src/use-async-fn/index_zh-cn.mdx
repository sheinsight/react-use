# useAsyncFn

import { HooksType } from '@/components'

<HooksType category="Utilities" />

一个 React 钩子（Hook），用于执行 **异步** 函数，附带额外的 **加载中** 状态，该状态指示 promise 是否处于等待中。

## 演示 Demo \{#demo}

点击模拟获取数据，并检查加载状态。

import { App } from './demo'

<App />

## 用法 Usage \{#usage}

import { RawCode } from '@/components'
import source from '!!raw-loader!./demo'

<RawCode>{source}</RawCode>

## 源码 Source \{#source}

import { Source } from '@/components'

<Source />

## API

```tsx
const { run, loading, value, error } = useAsyncFn(asyncFn, options)
```

### 异步函数 AsyncFn \{#async-fn}

一个返回 promise 的函数。

### 选项 Options \{#options}

```tsx
export type UseAsyncFnOptions = {
  /**
   * 是否在运行函数之前清除值
   *
   * @defaultValue false
   */
  clearBeforeRun?: boolean
}
```

### 返回值 Returns \{#returns}

```tsx
export type UseAsyncFnReturns<T extends AnyFunc> = {
  /**
   * 用于执行异步函数的函数
   */
  run: T
  /**
   * 异步函数是否正在加载中
   */
  loading: boolean
  /**
   * 异步函数抛出的错误
   */
  error: unknown | null
  /**
   * 异步函数返回的值
   */
  value: Awaited<ReturnType<T>> | undefined
}
```
