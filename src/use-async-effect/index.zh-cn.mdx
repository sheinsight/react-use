# useAsyncEffect

import { HooksType } from '@/components'

<HooksType category={frontmatter.category} />

一个类似于 [React.useEffect](https://react.dev/reference/react/useEffect) 的 React 钩子，但支持 **可取消** 的 **异步** 函数。

:::note
它不应该返回一个清理函数，因为作为 `async` 的它不能按预期进行清理。

如果你需要清理一些东西，请在 `UseAsyncEffectCallback` 中使用 `isCancelled` 来检查 Effect 的状态。
:::

## 演示 Demo \{#demo}

点击几次 fetch，你会发现所有**过时的**操作都被忽略了。

import { App } from './demo'

<App />

## 用法 Usage \{#usage}



## 源码 Source \{#source}

import { Source } from '@/components'

<Source />

## API

```tsx
useAsyncEffect(asyncCallback, deps)
```

### 异步回调 AsyncCallback \{#async-callback}

一个 Effect 回调，支持 **异步** 函数。

```tsx
export type AsyncEffectCallback = (isCancelled: () => boolean) => void

export type UseAsyncEffectCallback = AsyncEffectCallback
```

### 依赖项 Deps \{#deps}

与 [React.useEffect](https://react.dev/reference/react/useEffect) 相同。
