# useAsyncEffect

import { HooksType } from '@/components'

<HooksType category="Lifecycle" />

一个类似于 [React.useEffect](https://react.dev/reference/react/useEffect) 的 React 钩子，但支持 **可取消** 的 **异步** 函数。

:::note
它不应该返回一个清理函数，因为作为 `async` 的它不能按预期进行清理。

如果你需要清理一些东西，请在 `UseAsyncEffectCallback` 中使用 `isCancelled` 来检查效果的状态。
:::

## 演示 Demo \{#demo}

多次切换状态，你会发现所有 **过时** 的计时器都如预期地被删除，尽管我们在效果中没有返回清理函数。

import { App } from './demo'

<App />

## 用法 Usage \{#usage}

import { RawCode } from '@/components'
import source from '!!raw-loader!./demo'

<RawCode>{source}</RawCode>

## 源码 Source \{#source}

import { Source } from '@/components'

<Source />

## API

```tsx
useAsyncEffect(asyncCallback, deps)
```

### 异步回调 AsyncCallback \{#async-callback}

一个效果回调，支持 **异步** 函数。

```tsx
export type AsyncEffectCallback = (isCancelled: () => boolean) => void

export type UseAsyncEffectCallback = AsyncEffectCallback
```

### 依赖项 Deps \{#deps}

与 [React.useEffect](https://react.dev/reference/react/useEffect) 相同。
