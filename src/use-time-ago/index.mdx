# useTimeAgo

import { HooksType } from '@/components'

<HooksType category="Utilities" pausable />

A React Hook that helps to format a date to a human-readable time ago string. It will automatically update the time ago string every 30 seconds by default.

## Demo

import { App } from './demo'

<App />

## Usage

import { RawCode } from '@/components'
import source from '!!raw-loader!./demo'

<RawCode>{source}</RawCode>

## Source

import { Source } from '@/components'

<Source />

## API

```tsx
const timeAgo = useTimeAgo(dateLike, options)
const { timeAgo, ...pausable } = useTimeAgo(dateLike, { controls: true, ...otherOptions })
```

### DateLike

```tsx
// like '2021-01-01', 1612137600000, new Date(), undefined, null
export type DateLike = Date | number | string | undefined | null
```

### Options

```tsx
export type FormatTimeAgoOptions<UnitNames extends string = TimeAgoUnitNamesDefault> = {
  /**
   * Maximum unit (of diff in milliseconds) to display the full date instead of relative
   *
   * @default undefined
   */
  max?: UnitNames | number
  /**
   * Formatter for full date
   */
  fullDateFormatter?: TimeAgeFullDateFormatter
  /**
   * Messages for formatting the string
   */
  messages?: TimeAgoMessages<UnitNames>
  /**
   * Minimum display time unit (default is minute)
   *
   * @default false
   */
  showSecond?: boolean
  /**
   * Rounding method to apply.
   *
   * @default 'round'
   */
  rounding?: 'round' | 'ceil' | 'floor' | number
  /**
   * Custom units
   */
  units?: TimeAgoUnit<UnitNames>[]
}

export interface UseTimeAgoOptions<Controls extends boolean, UnitNames extends string = TimeAgoUnitNamesDefault>
  extends FormatTimeAgoOptions<UnitNames> {
  /**
   * Expose more controls
   *
   * @default false
   */
  controls?: Controls
  /**
   * Intervals to update, set 0 to disable auto update
   *
   * @default 30_000
   */
  updateInterval?: number
}
```

### Returns

import { Tip } from '@/components'

<Tip type="pausable" />

```tsx
export type UseTimeAgoReturn<Controls extends boolean = false> = Controls extends true
  ? { timeAgo: string } & Pausable
  : string
```
