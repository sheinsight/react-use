---
category: Browser
features: ['Pausable', 'IsSupported', 'LowLevel']
---

# useWebObserver

import { HooksType } from '@/components'

<HooksType {...frontmatter} />

这是一个低阶的 React 钩子，旨在简化观察者（Observer）的使用。可选的观察者包括：

```tsx
export type WebObserverType =
  | 'IntersectionObserver'
  | 'MutationObserver'
  | 'ResizeObserver'
  | 'PerformanceObserver'
  | 'ReportingObserver'
```

你**不应该**直接使用这个钩子，而是使用下面的高阶钩子：

- [交叉观察者 useIntersectionObserver](/reference/use-intersection-observer)
- [变动观察者 useMutationObserver](/reference/use-mutation-observer)
- [尺寸观察者 useResizeObserver](/reference/use-resize-observer)
- [性能观察者 usePerformanceObserver](/reference/use-performance-observer)
- [报告观察者 useReportingObserver](/reference/use-reporting-observer)

## 演示 \{#demo}

import { App } from './demo'

<App />

## 用法 \{#usage}

请查看 API。

## 源码 \{#source}

import { Source } from '@/components'

<Source />

## API \{#api}

```tsx
export interface UseWebObserverOptions {
  /**
   * 调用此函数后立即开始观察
   *
   * @defaultValue true
   */
  immediate?: boolean
}

export interface UseWebObserverReturns<Observer> extends Pausable {
  /**
   * 保存观察者实例的 ref
   */
  observerRef: React.MutableRefObject<Observer | null>
  /**
   * 检查当前环境是否支持观察者
   */
  isSupported: boolean
}

export type WebObserverType =
  | 'IntersectionObserver'
  | 'MutationObserver'
  | 'ResizeObserver'
  | 'PerformanceObserver'
  | 'ReportingObserver'

export function useWebObserver(
  observer: 'IntersectionObserver',
  target: Arrayable<ElementTarget>,
  callback: IntersectionObserverCallback,
  options?: UseWebObserverOptions,
  initOptions?: IntersectionObserverInit,
  observerOptions?: undefined,
): UseWebObserverReturns<IntersectionObserver>
export function useWebObserver(
  observer: 'MutationObserver',
  target: Arrayable<ElementTarget>,
  callback: MutationCallback,
  options?: UseWebObserverOptions,
  initOptions?: undefined,
  observerOptions?: MutationObserverInit,
): UseWebObserverReturns<MutationObserver>
export function useWebObserver(
  observer: 'ResizeObserver',
  target: Arrayable<ElementTarget>,
  callback: ResizeObserverCallback,
  options?: UseWebObserverOptions,
  initOptions?: undefined,
  observerOptions?: ResizeObserverOptions,
): UseWebObserverReturns<ResizeObserver>
export function useWebObserver(
  observer: 'PerformanceObserver',
  target: undefined,
  callback: PerformanceObserverCallback,
  options?: UseWebObserverOptions,
  initOptions?: undefined,
  observerOptions?: PerformanceObserverInit,
): UseWebObserverReturns<PerformanceObserver>
export function useWebObserver(
  observer: 'ReportingObserver',
  target: undefined,
  callback: ReportingObserverCallback,
  options?: UseWebObserverOptions,
  initOptions?: ReportingObserverOptions,
  observerOptions?: undefined,
): UseWebObserverReturns<ReportingObserver>
```
