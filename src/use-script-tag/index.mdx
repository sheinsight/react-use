# useScriptTag

import { HooksType } from '@/components'

<HooksType category="Element" />

A React Hook that helps to apply a script tag to the document with ease in React.

## Demo

import { App } from './demo'

<App />

## Usage

import { RawCode } from '@/components'
import source from '!!raw-loader!./demo'

<RawCode>{source}</RawCode>

## Source

import { Source } from '@/components'

<Source />

## API

```tsx
const { scriptTag, load, unload } = useScriptTag(src, onLoaded, options)
```

### Src

A `string` that represents the URL of the script to be loaded.

### OnLoaded

A `function` that will be called when the script is loaded.

### Options

```tsx
export type ReferrerPolicy =
  | 'no-referrer'
  | 'no-referrer-when-downgrade'
  | 'origin'
  | 'origin-when-cross-origin'
  | 'same-origin'
  | 'strict-origin'
  | 'strict-origin-when-cross-origin'
  | 'unsafe-url'

export interface UseScriptTagOptions {
  /**
   * Whether load script immediately at mount
   *
   * @default true
   */
  immediate?: boolean
  /**
   * Whether the script is loaded asynchronously
   *
   * @default true
   */
  async?: boolean
  /**
   * The type of the script
   *
   * @default 'text/javascript'
   */
  type?: string
  /**
   * Whether to control the loading of the script manually
   *
   * @default false
   */
  manual?: boolean
  /**
   * The value of the `crossorigin` attribute
   *
   * @default undefined
   */
  crossOrigin?: 'anonymous' | 'use-credentials'
  /**
   * The value of the `referrerpolicy` attribute
   *
   * @default undefined
   */
  referrerPolicy?: ReferrerPolicy
  /**
   * Whether the script is a module script
   *
   * @default undefined
   */
  noModule?: boolean
  /**
   * Whether the script is deferred
   *
   * @default false
   */
  defer?: boolean
  /**
   * Additional attributes to be set on the script element
   *
   * @default {}
   */
  attrs?: Record<string, string>
}
```

### Returns

```tsx
export type UseScriptTagReturn = {
  /**
   * The script element Ref
   */
  scriptTag: MutableRefObject<HTMLScriptElement | null>
  /**
   * Load the script
   *
   * @param waitForScriptLoad Whether to wait for the script to be loaded, `true` by default
   */
  load: (waitForScriptLoad?: boolean) => Promise<HTMLScriptElement | boolean>
  /**
   * Unload the script
   */
  unload(): void
}
```
